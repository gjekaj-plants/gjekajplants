<!DOCTYPE html>
<html lang="sq">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gjekaj Plants – Katalogu i Bimëve</title>

  <!-- SUPABASE CDN (DUHET PATJETËR) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>

  <style>
    body { font-family: system-ui, Arial; margin: 20px; }
    .item { border: 1px solid #ddd; padding: 12px; margin-bottom: 10px; border-radius: 8px; }
    .price { color: #c00; font-weight: bold; }
  </style>
</head>
<body>

<h1>Gjekaj Plants – Katalogu i Bimëve</h1>
<p id="status">Duke u lidhur me Supabase…</p>

<div id="list"></div>

<script>
/* ===============================
   KONFIGURIMI SUPABASE
================================ */

const SUPABASE_URL = "https://oehcfyflwvlqowjezwg.supabase.co";
const SUPABASE_ANON_KEY = "sb_publishable_Ll_tV3Hs9MmMO54DaDWGiQ_KRpED8xd";
const TABLE_NAME = "products";

/* ===============================
   KRIJO CLIENT
================================ */

const client = window.supabase.createClient(
  SUPABASE_URL,
  SUPABASE_ANON_KEY
);

/* ===============================
   NGARKO PRODUKTET
================================ */

async function loadProducts() {
  const status = document.getElementById("status");
  const list = document.getElementById("list");

  status.textContent = "Duke marrë artikujt…";

  const { data, error } = await client
    .from(TABLE_NAME)
    .select("*");

  if (error) {
    console.error(error);
    status.textContent = "Gabim gjatë ngarkimit!";
    return;
  }

  status.textContent = U gjetën ${data.length} artikuj;
  list.innerHTML = "";

  data.forEach(p => {
    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <strong>${p.name || "Pa emër"}</strong><br>
      Kodi: ${p.code}<br>
      Stok: ${p.stock}<br>
      <span class="price">${p.price_lek} Lekë</span><br>
      <small>${p.description || ""}</small>
    `;
    list.appendChild(div);
  });
}

/* ===============================
   START
================================ */

loadProducts();
</script>

</body>
</html>
